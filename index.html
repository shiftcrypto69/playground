<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Playground AI | Modern Editor v3.0</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root {
            --bg-dark: #0f172a;
            --sidebar-bg: #1e293b;
            --off-white: #FAF9F6;
            --accent-blue: #3b82f6;
            --dot-color: #A0AEC0;
            --text-muted: rgba(255, 255, 255, 0.5);
        }

        body {
            background-color: var(--bg-dark);
            margin: 0;
            font-family: 'Inter', sans-serif;
            color: white;
            overflow: hidden;
            height: 100vh;
        }

        .dashboard {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 320px;
            background-color: var(--sidebar-bg);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            padding: 24px;
            z-index: 10;
            overflow-y: auto;
        }

        .sidebar-header .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--accent-blue);
            margin-bottom: 30px;
            letter-spacing: -1px;
        }

        .setting-group { margin-bottom: 24px; }

        .setting-group label {
            display: block;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .upload-zone {
            border: 2px dashed #334155;
            background: #0f172a;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .upload-zone:hover {
            border-color: var(--accent-blue);
            background: rgba(59, 130, 246, 0.05);
            color: white;
        }

        .input-dark {
            width: 100%;
            background: #0f172a;
            border: 1px solid #334155;
            color: white;
            padding: 10px;
            border-radius: 8px;
            outline: none;
            font-size: 0.85rem;
        }

        .file-preview-list {
            margin-top: 15px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .file-item {
            position: relative;
            width: 100%;
            aspect-ratio: 1;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
        }

        .btn-delete {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
        }

        /* --- RATIO BUTTONS STYLE --- */
        .ratio-buttons {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .btn-ratio {
            flex: 1;
            background: #0f172a;
            border: 1px solid #334155;
            color: white;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-ratio:hover { border-color: var(--accent-blue); }
        .btn-ratio.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        /* --- CANVAS / MAIN CONTENT --- */
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
            position: relative;
            padding: 20px;
        }

        .mockup-card {
            background-color: var(--off-white);
            width: 100%;
            max-width: 450px;
            height: 550px; /* Default height */
            border-radius: 35px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 40px 80px -15px rgba(0, 0, 0, 0.6);
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .image-area {
            flex-grow: 1;
            background: #e5e7eb;
            border-radius: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            border: 1px dashed rgba(0,0,0,0.1);
        }

        .text-layer {
            position: absolute;
            cursor: move;
            padding: 5px;
            user-select: none;
            white-space: nowrap;
            touch-action: none;
        }

        .text-layer.active {
            outline: 2px dashed var(--accent-blue);
            background: rgba(59, 130, 246, 0.1);
        }

        .browser-dots { display: flex; gap: 8px; margin-bottom: 20px; }
        .dot { width: 10px; height: 10px; background-color: var(--dot-color); border-radius: 50%; opacity: 0.6; }

        .btn-add-text {
            width: 100%;
            background: var(--accent-blue);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
            margin-top: 10px;
            transition: opacity 0.2s;
        }

        .btn-add-text:active { opacity: 0.7; }

        .btn-pro {
            margin-top: auto;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .btn-pro:hover { transform: scale(1.02); }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<div class="dashboard">
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">EDITOR.AI</div>
        </div>

        <div class="setting-group">
            <label>Imej & Assets</label>
            <div class="upload-zone" id="uploadZone">
                <span>Klik atau seret gambar</span>
                <input type="file" id="fileInput" hidden accept="image/*" multiple>
            </div>
            <input type="text" id="imageLinkInput" class="input-dark mt-2" placeholder="Paste URL gambar & Enter...">
            <div id="previewList" class="file-preview-list"></div>
        </div>

        <hr class="opacity-10 mb-6">

        <div class="setting-group">
            <label>Tambah Teks</label>
            <input type="text" id="textInput" class="input-dark" placeholder="Tulis sesuatu...">
            <button class="btn-add-text" id="btnAddText">+ Tambah ke Kanvas</button>
        </div>

        <div class="setting-group">
            <label>Gaya Teks Terpilih</label>
            <select id="fontFamily" class="input-dark mb-2">
                <option value="'Inter', sans-serif">Inter (Modern)</option>
                <option value="'Georgia', serif">Georgia (Klasik)</option>
                <option value="'Courier New', monospace">Monospace</option>
                <option value="'Dancing Script', cursive">Dancing Script</option>
            </select>
            <div class="flex gap-2">
                <input type="number" id="fontSize" class="input-dark" value="24" min="10" max="100">
                <input type="color" id="textColor" class="h-10 w-20 bg-transparent border-none cursor-pointer" value="#1e293b">
            </div>
        </div>

        <div class="setting-group ratio-settings">
            <label>Nisbah Kanvas:</label>
            <div class="ratio-buttons">
                <button type="button" class="btn-ratio active" data-ratio="1/1">1:1</button>
                <button type="button" class="btn-ratio" data-ratio="4/3">4:3</button>
                <button type="button" class="btn-ratio" data-ratio="16/9">16:9</button>
            </div>
            <p class="text-[10px] text-slate-500 mt-2">*Tip: Klik 2x teks untuk padam</p>
        </div>

        <button class="btn-pro" id="btnExport">EXPORT DESIGN</button>
    </aside>

    <main class="main-content">
        <div class="mockup-card" id="mainCard">
            <div class="browser-dots">
                <div class="dot"></div><div class="dot"></div><div class="dot"></div>
            </div>

            <div id="canvasArea" class="image-area">
                <p id="placeholderText" class="text-slate-400 text-sm">Pilih gambar atau tambah teks</p>
            </div>

            <div class="flex gap-2 bg-white p-2 rounded-xl shadow-sm border border-slate-100">
                <input type="text" class="flex-grow border-none outline-none px-3 text-slate-800 text-sm" placeholder="Nota cepat...">
                <button class="bg-slate-900 text-white px-4 py-2 rounded-lg text-xs font-bold">SIMPAN</button>
            </div>
        </div>
        <p class="mt-8 text-slate-500 text-xs tracking-widest uppercase">AI Preview Mode • High Resolution</p>
    </main>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const canvasArea = document.getElementById('canvasArea');
        const mainCard = document.getElementById('mainCard');
        const previewList = document.getElementById('previewList');
        const fileInput = document.getElementById('fileInput');
        const uploadZone = document.getElementById('uploadZone');
        const imageLinkInput = document.getElementById('imageLinkInput');
        const placeholderText = document.getElementById('placeholderText');
        
        let selectedElement = null;

        // 1. Logik Nisbah (Ratio)
        const ratioButtons = document.querySelectorAll('.btn-ratio');
        ratioButtons.forEach(btn => {
            btn.onclick = () => {
                ratioButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const ratio = btn.getAttribute('data-ratio');
                const maxWidth = 450;

                if (ratio === "1/1") {
                    mainCard.style.width = maxWidth + 'px';
                    mainCard.style.height = maxWidth + 'px';
                } else if (ratio === "4/3") {
                    mainCard.style.width = maxWidth + 'px';
                    mainCard.style.height = (maxWidth * 0.75) + 'px';
                } else if (ratio === "16/9") {
                    mainCard.style.width = maxWidth + 'px';
                    mainCard.style.height = (maxWidth * 0.5625) + 'px';
                }
            };
        });

        // 2. Logik Upload Gambar
        uploadZone.onclick = () => fileInput.click();
        fileInput.onchange = (e) => {
            const files = e.target.files;
            for (let file of files) {
                const reader = new FileReader();
                reader.onload = (event) => addImageToSidebar(event.target.result);
                reader.readAsDataURL(file);
            }
        };

        // 3. Logik Paste Link
        imageLinkInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && imageLinkInput.value !== "") {
                addImageToSidebar(imageLinkInput.value);
                imageLinkInput.value = "";
            }
        });

        function addImageToSidebar(src) {
            const item = document.createElement('div');
            item.className = 'file-item';
            item.style.backgroundImage = `url('${src}')`;

            const delBtn = document.createElement('button');
            delBtn.className = 'btn-delete';
            delBtn.innerHTML = '×';
            delBtn.onclick = (e) => { e.stopPropagation(); item.remove(); };

            item.onclick = () => {
                canvasArea.style.backgroundImage = `url('${src}')`;
                canvasArea.style.backgroundSize = 'cover';
                canvasArea.style.backgroundPosition = 'center';
                placeholderText.classList.add('hidden');
            };

            item.appendChild(delBtn);
            previewList.appendChild(item);
        }

        // 4. Logik Tambah Teks
        const btnAddText = document.getElementById('btnAddText');
        const textInput = document.getElementById('textInput');

        btnAddText.onclick = () => {
            if (textInput.value.trim() === "") return;

            const textLayer = document.createElement('div');
            textLayer.className = 'text-layer';
            textLayer.innerText = textInput.value;
            
            textLayer.style.fontFamily = document.getElementById('fontFamily').value;
            textLayer.style.fontSize = document.getElementById('fontSize').value + 'px';
            textLayer.style.color = document.getElementById('textColor').value;
            textLayer.style.left = '20px';
            textLayer.style.top = '20px';

            makeDraggable(textLayer);

            textLayer.ondblclick = () => textLayer.remove();

            textLayer.addEventListener('mousedown', () => {
                document.querySelectorAll('.text-layer').forEach(el => el.classList.remove('active'));
                textLayer.classList.add('active');
                selectedElement = textLayer;
                
                document.getElementById('fontFamily').value = textLayer.style.fontFamily;
                document.getElementById('fontSize').value = parseInt(textLayer.style.fontSize);
            });

            canvasArea.appendChild(textLayer);
            placeholderText.classList.add('hidden');
            textInput.value = "";
        };

        // 5. Live Styling Updates
        document.getElementById('fontFamily').onchange = (e) => {
            if (selectedElement) selectedElement.style.fontFamily = e.target.value;
        };
        document.getElementById('fontSize').oninput = (e) => {
            if (selectedElement) selectedElement.style.fontSize = e.target.value + 'px';
        };
        document.getElementById('textColor').oninput = (e) => {
            if (selectedElement) selectedElement.style.color = e.target.value;
        };

        // 6. Drag Functionality
        function makeDraggable(elmnt) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            elmnt.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // 7. Export Design
        document.getElementById('btnExport').onclick = () => {
            if(selectedElement) selectedElement.classList.remove('active');
            
            html2canvas(document.getElementById('mainCard'), {
                backgroundColor: null,
                scale: 2 
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'my-design.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        };

        canvasArea.onclick = (e) => {
            if (e.target === canvasArea) {
                document.querySelectorAll('.text-layer').forEach(el => el.classList.remove('active'));
                selectedElement = null;
            }
        };
    });
</script>

</body>
</html>
